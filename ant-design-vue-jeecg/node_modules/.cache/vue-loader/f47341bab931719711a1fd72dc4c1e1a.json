{"remainingRequest":"E:\\gitData\\wangfuj\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\gitData\\wangfuj\\jeecg-boot\\ant-design-vue-jeecg\\src\\views\\modules\\online\\cgform\\auto\\erp\\OnlCgformErpList.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\gitData\\wangfuj\\jeecg-boot\\ant-design-vue-jeecg\\src\\views\\modules\\online\\cgform\\auto\\erp\\OnlCgformErpList.vue","mtime":1618453704981},{"path":"E:\\gitData\\wangfuj\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1618457261991},{"path":"E:\\gitData\\wangfuj\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605147250913},{"path":"E:\\gitData\\wangfuj\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1618457253212}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getAction } from '@/api/manage'\n\nexport default {\n  name: 'OnlCgformErpList',\n  components:{\n  },\n  data(){\n    return {\n      code:'',\n      url: {\n        getColumns: '/online/cgform/api/getErpColumns/',\n      },\n      mainModel:{},\n      subList:[],\n      mainId:'',\n      selectedRow:{}\n\n    }\n  },\n  watch: {\n    '$route'() {\n      // 刷新参数放到这里去触发，就可以刷新相同界面了\n      this.initColumnConfig()\n    }\n  },\n\n  created() {\n    this.initColumnConfig();\n  },\n  methods:{\n    getSubIndex(index){\n      return index+1 + ''\n    },\n    getSubRef(item){\n      let ref = item.currentTableName\n      console.log(\"ref string\",ref)\n      return ref;\n    },\n    initColumnConfig(){\n      if(!this.$route.params.code){\n        return false\n      }\n      this.code = this.$route.params.code\n      getAction(`${this.url.getColumns}${this.code}`).then((res)=>{\n        console.log(\"erp表单配置\",res)\n        if(res.success){\n          this.mainModel = res.result.main\n          this.subList = res.result.subList\n\n          this.$nextTick(()=>{\n            this.$refs['onl_'+this.mainModel.currentTableName].initListByModel();\n            if(this.subList && this.subList.length>0){\n              for(let item of this.subList){\n                this.$refs[item.currentTableName][0].initListByModel();\n              }\n            }\n          });\n\n        }\n      })\n    },\n    onSelected(row){\n      console.log(\"onSelected\",row)\n      this.selectedRow = row;\n    }\n\n\n  }\n}\n",null]}