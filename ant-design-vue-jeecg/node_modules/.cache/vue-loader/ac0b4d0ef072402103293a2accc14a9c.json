{"remainingRequest":"E:\\gitData\\wangfuj\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\gitData\\wangfuj\\jeecg-boot\\ant-design-vue-jeecg\\src\\views\\modules\\online\\cgreport\\OnlCgreportHeadList.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\gitData\\wangfuj\\jeecg-boot\\ant-design-vue-jeecg\\src\\views\\modules\\online\\cgreport\\OnlCgreportHeadList.vue","mtime":1618453704984},{"path":"E:\\gitData\\wangfuj\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1618457261991},{"path":"E:\\gitData\\wangfuj\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605147250913},{"path":"E:\\gitData\\wangfuj\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1618457253212}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {JeecgListMixin} from '@/mixins/JeecgListMixin'\nimport Clipboard from 'clipboard'\nimport { getAction } from '@/api/manage'\n\nexport default {\n  name: 'OnlCgreportHeadList',\n  mixins: [JeecgListMixin],\n  components: {\n    Clipboard\n  },\n  data() {\n    return {\n      description: '在线报表配置管理页面',\n      visible:false,\n      reportUrlText:'',\n      // 表头\n      columns: [\n        {\n          title: '报表名称',\n          align: 'center',\n          dataIndex: 'name'\n        },\n        {\n          title: '编码',\n          align: 'center',\n          dataIndex: 'code'\n        },\n        {\n          title: '查询SQL',\n          align: 'center',\n          dataIndex: 'cgrSql'\n        },\n        {\n          title: '数据源',\n          align: 'center',\n          dataIndex: 'dbSource'\n        },\n        {\n          title: '创建时间',\n          align: 'center',\n          dataIndex: 'createTime'\n        },\n        {\n          title: '描述',\n          align: 'center',\n          dataIndex: 'content'\n        },\n        {\n          title: '操作',\n          dataIndex: 'action',\n          align: 'center',\n          scopedSlots: { customRender: 'action' }\n        }\n      ],\n      url: {\n        list: '/online/cgreport/head/list',\n        delete: '/online/cgreport/head/delete',\n        deleteBatch: '/online/cgreport/head/deleteBatch',\n        getParamsInfo:'/online/cgreport/api/getParamsInfo/'\n      }\n    }\n  },\n  methods: {\n    initReportUrlText(id){\n      getAction(this.url.getParamsInfo+id).then((res) => {\n        let textUrl = \"\"\n        if (res.success) {\n          if(res.result && res.result.length>0){\n            for(let i of res.result){\n              textUrl+=i.paramName+\"=${\"+i.paramName+\"}&\"\n            }\n          }\n        } else {\n          this.$message.warning(res.message)\n        }\n        if(textUrl.length>0){\n          textUrl = textUrl.substring(0,textUrl.length-1)\n          this.reportUrlText = `/online/cgreport/${id}?${textUrl}`\n        }else{\n          this.reportUrlText = `/online/cgreport/${id}`\n        }\n      })\n    },\n    goPageOnline(id){\n      this.$router.push({path: '/online/cgreport/'+id})\n    },\n    popReportURL(id){\n      this.visible = true;\n      this.initReportUrlText(id)\n    },\n    handleCancel(){\n      this.visible = false\n      this.reportUrlText = '';\n    },\n    onCopyUrl(){\n      var clipboard = new Clipboard('.copy-this-text')\n      clipboard.on('success', () => {\n        clipboard.destroy()\n        this.$message.success('复制成功')\n        this.handleCancel()\n      })\n      clipboard.on('error', () => {\n        this.$message.error('该浏览器不支持自动复制')\n        clipboard.destroy()\n      })\n    }\n  }\n}\n",null]}