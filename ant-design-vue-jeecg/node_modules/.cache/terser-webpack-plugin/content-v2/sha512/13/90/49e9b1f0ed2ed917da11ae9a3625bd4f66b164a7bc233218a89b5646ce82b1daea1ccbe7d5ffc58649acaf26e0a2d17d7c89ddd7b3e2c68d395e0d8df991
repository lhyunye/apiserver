{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-fe358a04\",\"chunk-779ac56c\",\"chunk-2d0df843\"],{\"798d\":function(e,t,n){\"use strict\";n(\"9efd\")},8034:function(e,t,n){\"use strict\";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"a-drawer\",{staticStyle:{height:\"calc(100% - 55px)\",overflow:\"auto\",\"padding-bottom\":\"53px\"},attrs:{title:e.title,maskClosable:!0,width:\"600\",placement:\"right\",closable:!0,visible:e.visible},on:{close:e.close}},[n(\"a-spin\",{attrs:{spinning:e.confirmLoading}},[e.designNameOption.length>0?n(\"a-form\",{attrs:{form:e.form}},[n(\"a-form-item\",{attrs:{label:\"\"}},[n(\"a-col\",{attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[n(\"a-card\",{style:{marginTop:\"12px\",height:\"auto\"}},[n(\"a-checkbox-group\",{staticStyle:{width:\"100%\"},on:{change:e.designNameChange},model:{value:e.designNameValue,callback:function(t){e.designNameValue=t},expression:\"designNameValue\"}},[n(\"a-row\",[e._l(e.designNameOption,(function(t){return[n(\"a-col\",{attrs:{span:6}},[n(\"a-checkbox\",{attrs:{value:t.value}},[e._v(e._s(t.text))])],1)]}))],2)],1)],1)],1)],1)],1):n(\"div\",[n(\"h3\",[e._v(\"无可配置角色!\")])])],1),n(\"div\",{staticClass:\"drawer-bootom-button\"},[n(\"a-dropdown\",{staticStyle:{float:\"left\"},attrs:{trigger:[\"click\"],placement:\"topCenter\"}},[n(\"a-menu\",{attrs:{slot:\"overlay\"},slot:\"overlay\"},[n(\"a-menu-item\",{key:\"1\",on:{click:e.checkALL}},[e._v(\"全部勾选\")]),n(\"a-menu-item\",{key:\"2\",on:{click:e.cancelCheckALL}},[e._v(\"取消全选\")])],1),n(\"a-button\",[e._v(\"\\n        操作 \"),n(\"a-icon\",{attrs:{type:\"up\"}})],1)],1),n(\"a-popconfirm\",{attrs:{title:\"确定放弃编辑？\",okText:\"确定\",cancelText:\"取消\"},on:{confirm:e.close}},[n(\"a-button\",{staticStyle:{\"margin-right\":\".8rem\"}},[e._v(\"取消\")])],1),n(\"a-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.handleSubmit(!0)}}},[e._v(\"保存\")])],1)],1)},a=[],o=(n(\"ac6a\"),n(\"ac4d\"),n(\"8a81\"),n(\"5df3\"),n(\"1c4c\"),n(\"7f7f\"),n(\"6b54\"),n(\"0fea\")),i=n(\"d579\");n(\"89f2\");function s(e,t){var n;if(\"undefined\"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=l(e))||t&&e&&\"number\"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function l(e,t){if(e){if(\"string\"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u={name:\"DeptRoleUserModal\",components:{JEllipsis:i[\"default\"]},data:function(){return{currentDeptId:\"\",title:\"部门角色分配\",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{},url:{add:\"/sys/sysDepartRole/deptRoleUserAdd\",getDeptRoleList:\"/sys/sysDepartRole/getDeptRoleList\",getDeptRoleByUserId:\"/sys/sysDepartRole/getDeptRoleByUserId\"},designNameOption:[],userId:\"\",newRoleId:\"\",oldRoleId:\"\",designNameValue:[],desformList:[]}},created:function(){},methods:{add:function(e,t){this.userId=e.id,this.currentDeptId=t,this.loadDesformList(),this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,Object(o[\"c\"])(this.url.getDeptRoleByUserId,{userId:this.userId}).then((function(e){if(e.success){var n,r=[],a=s(e.result);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.push(o.droleId)}}catch(i){a.e(i)}finally{a.f()}t.oldRoleId=r.join(\",\"),t.designNameValue=r,t.newRoleId=r.join(\",\")}}))},close:function(){this.$emit(\"close\"),this.visible=!1},handleSubmit:function(){var e=this;e.confirmLoading=!0;var t=this.url.add,n=\"post\",r=Object.assign(this.model,{});r.userId=this.userId,r.newRoleId=this.newRoleId,r.oldRoleId=this.oldRoleId,Object(o[\"h\"])(t,r,n).then((function(t){t.success?(e.$message.success(t.message),e.$emit(\"reload\"),e.$emit(\"ok\")):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1,e.close()}))},handleCancel:function(){this.designNameOption=[],this.designNameValue=[],this.close()},designNameChange:function(e){this.newRoleId=e.join(\",\")},checkALL:function(){var e,t=[],n=s(this.desformList);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(a){n.e(a)}finally{n.f()}this.designNameValue=t,this.newRoleId=t.join(\",\")},cancelCheckALL:function(){this.designNameValue=[],this.newRoleId=\"\"},loadDesformList:function(){var e=this;Object(o[\"c\"])(this.url.getDeptRoleList,{departId:this.currentDeptId}).then((function(t){if(t.success){e.desformList=t.result;var n,r=[],a=s(e.desformList);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.push({value:o.id,text:o.roleName})}}catch(i){a.e(i)}finally{a.f()}e.designNameOption=r}}))}}},f=u,d=(n(\"798d\"),n(\"2877\")),m=Object(d[\"a\"])(f,r,a,!1,null,\"3eab4717\",null);t[\"default\"]=m.exports},\"89f2\":function(e,t,n){\"use strict\";n.d(t,\"c\",(function(){return l})),n.d(t,\"a\",(function(){return u})),n.d(t,\"b\",(function(){return f}));n(\"ac4d\"),n(\"8a81\"),n(\"5df3\"),n(\"1c4c\"),n(\"7f7f\"),n(\"96cf\"),n(\"ac6a\"),n(\"28a5\"),n(\"6b54\");var r=n(\"1da1\"),a=n(\"4ec3\");n(\"0fea\");function o(e,t){var n;if(\"undefined\"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&\"number\"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function i(e,t){if(e){if(\"string\"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return c.apply(this,arguments)}function c(){return c=Object(r[\"a\"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt(\"return\",\"字典Code不能为空!\");case 2:return e.next=4,Object(a[\"f\"])(t);case 4:return n=e.sent,e.abrupt(\"return\",n);case 6:case\"end\":return e.stop()}}),e)}))),c.apply(this,arguments)}function u(e,t){if(e instanceof Array){var n,r=o(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(t===a.value)return a.text}}catch(i){r.e(i)}finally{r.f()}}return t}function f(e,t){if(0===t||\"0\"===t){var n,r=o(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(t==a.value)return a.text}}catch(l){r.e(l)}finally{r.f()}}if(!t||!e||0==e.length)return\"\";var i=\"\";t=t.toString();var s=t.split(\",\");return e.forEach((function(e){for(var t=0;t<s.length;t++)if(s[t]===e.value){i+=e.text+\",\";break}})),\"\"==i?t:i.substring(0,i.length-1)}},\"9efd\":function(e,t,n){},d579:function(e,t,n){\"use strict\";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"a-tooltip\",{attrs:{placement:\"topLeft\"}},[n(\"template\",{slot:\"title\"},[n(\"span\",[e._v(e._s(e.value))])]),e._v(\"\\n  \"+e._s(e._f(\"ellipsis\")(e.value,e.length))+\"\\n\")],2)},a=[],o=(n(\"c5f6\"),{name:\"JEllipsis\",props:{value:{type:String,required:!1},length:{type:Number,required:!1,default:25}}}),i=o,s=n(\"2877\"),l=Object(s[\"a\"])(i,r,a,!1,null,\"4de15389\",null);t[\"default\"]=l.exports}}]);","extractedComments":[]}